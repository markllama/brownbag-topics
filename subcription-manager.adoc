:source-highlighter: pygments

== Subscription Manager Concepts

`subscription-manager` is the tool Red Hat uses to control access to
premium software packages and updates. It serves three functions for
the sysadmin.

* register the host with Red Hat
* attach a subscription (software entitlement)
* enable YUM repositories provided by the subscription.


== Preparation of RHEL image - disable and remove RHN if needed

If the host you're working on is subscribed by traditional RHN (as is
the commercial cloud VM I'm using to demo this), disable that before beginning.

.Disable RHN Registration
[literal,subs="verbatim,quotes"]
----
**mv /etc/sysconfig/rhn/systemid /etc/sysconfig/rhn/disable.systemid
sed -i -e '/^enabled =/s/1/0/' /etc/yum/pluginconf.d/rhnplugin.conf**
----



== Register host with Red Hat subscription service


.Register Host
[literal,subs="verbatim,quotes"]
----
*subscription-manager register --username <username> --password <password>*
Registering to: subscription.rhsm.redhat.com:443/subscription
The system has been registered with ID: e3c6b7ba-83fa-4af8-8ef9-10aa6af2dd2e
The registered system name is: markllama-rhel7
----

* Check status of registration and attachement


.Check Status (before attach)
[literal,subs="verbatim,quotes"]
----
*subscription-manager status*
+-------------------------------------------+
   System Status Details
+-------------------------------------------+
Overall Status: Invalid

Red Hat Enterprise Linux Server:
- Not supported by a valid subscription.
----
